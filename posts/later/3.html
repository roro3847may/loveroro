fetch("../../header.html") .then(r => r.text()) .then(h => {{ const headerEl = document.getElementById("site-header"); headerEl.innerHTML = h; headerEl.querySelectorAll("script").forEach((oldScript) => {{ const newScript = document.createElement("script"); if (oldScript.src) newScript.src = oldScript.src; else newScript.textContent = oldScript.textContent; document.body.appendChild(newScript); }}); }}); 

+ #3

계획을 세우다 보니 우울감이 떠나가서~ +20d 

+20d

댓글

전송 

import { db, ref, push, get, set, onValue } from "../../js/firebase.js"; const commentsDiv = document.getElementById("comments"); const input = document.getElementById("commentInput"); const button = document.getElementById("commentButton"); const pathParts = location.pathname.split("/"); const postId = pathParts.slice(-1)[0].replace(".html", ""); const category = pathParts.includes("later") ? "later" : "sooner"; const commentsRef = ref(db, `comments/${category}-${postId}`); function renderComments(data) { commentsDiv.innerHTML = ""; let idx = 1; if (data) { Object.values(data).forEach((text) => { const p = document.createElement("p"); p.innerText = `익명${idx++}: ${text}`; commentsDiv.appendChild(p); }); } } onValue(commentsRef, (snapshot) => { renderComments(snapshot.val()); }); button.addEventListener("click", () => { const val = input.value.trim(); if (val !== "사랑해") { alert("‘사랑해’만 입력할 수 있습니다."); return; } push(commentsRef, val); const countRef = ref(db, "loveCount"); get(countRef).then((snap) => { const newCount = (snap.val() || 0) + 1; set(countRef, newCount); }); input.value = ""; }); 
